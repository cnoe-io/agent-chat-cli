# Interactive Input Examples and Usage

**Status**: ğŸŸ¢ In-use
**Category**: Documentation & Examples
**Date**: November 7, 2025

## Overview

This document provides comprehensive examples of interactive input with structured metadata, showing how the CLI handles dropdown selections, text inputs, and multiple field scenarios.

## How It Works

The CLI automatically detects when an agent returns a JSON response with metadata and provides an interactive UI for data collection. No special configuration or user action is required - it just works.

## Example 1: Dropdown Selection

### Agent Response

```json
{
  "is_task_complete": false,
  "require_user_input": true,
  "content": "ArgoCD is not currently accessible. Would you like help diagnosing or starting the ArgoCD server?",
  "metadata": {
    "user_input": true,
    "input_fields": [
      {
        "field_name": "action",
        "field_description": "Choose troubleshooting action",
        "field_values": ["troubleshoot", "start_server", "specify_endpoint"]
      }
    ]
  }
}
```

### User Experience

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI Platform Engineer Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                â”‚
â”‚  ArgoCD is not currently accessible. Would you like help       â”‚
â”‚  diagnosing or starting the ArgoCD server?                     â”‚
â”‚                                                                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸ“ Choose troubleshooting action

Select an option:

  [1]  troubleshoot
  [2]  start_server
  [3]  specify_endpoint

Enter your choice (number or value): 1

â¡ï¸  Sending: troubleshoot
```

### Input Methods Supported

Users can enter:
- **Number:** `1`, `2`, `3`
- **Exact value:** `troubleshoot`
- **Partial match:** `trouble` (fuzzy matching)

## Example 2: Text Input

### Agent Response

```json
{
  "is_task_complete": false,
  "require_user_input": true,
  "content": "Please provide the endpoint URL for your ArgoCD server.",
  "metadata": {
    "user_input": true,
    "input_fields": [
      {
        "field_name": "endpoint_url",
        "field_description": "Enter the ArgoCD server endpoint URL",
        "field_values": []
      }
    ]
  }
}
```

### User Experience

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI Platform Engineer Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                â”‚
â”‚  Please provide the endpoint URL for your ArgoCD server.       â”‚
â”‚                                                                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸ“ Enter the ArgoCD server endpoint URL

endpoint_url: https://argocd.example.com

â¡ï¸  Sending: https://argocd.example.com
```

## Example 3: Multiple Input Fields

### Agent Response

```json
{
  "is_task_complete": false,
  "require_user_input": true,
  "content": "Let's configure your deployment.",
  "metadata": {
    "user_input": true,
    "input_fields": [
      {
        "field_name": "environment",
        "field_description": "Select the target environment",
        "field_values": ["development", "staging", "production"]
      },
      {
        "field_name": "namespace",
        "field_description": "Enter the Kubernetes namespace",
        "field_values": []
      },
      {
        "field_name": "replicas",
        "field_description": "Number of replicas",
        "field_values": []
      }
    ]
  }
}
```

### User Experience

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI Platform Engineer Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                â”‚
â”‚  Let's configure your deployment.                              â”‚
â”‚                                                                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸ“ Select the target environment

Select an option:

  [1]  development
  [2]  staging
  [3]  production

Enter your choice (number or value): 2

ğŸ“ Enter the Kubernetes namespace

namespace: my-app-staging

ğŸ“ Number of replicas

replicas: 3

â¡ï¸  Sending: {"environment": "staging", "namespace": "my-app-staging", "replicas": "3"}
```

## Example 4: Streaming with Structured Output

The CLI seamlessly handles streaming responses followed by interactive input:

### Flow

1. **Agent starts streaming** - User sees spinner
2. **JSON detected** - Streaming suppressed to avoid raw JSON
3. **Structured panel displayed** - Clean formatted content
4. **Interactive prompts shown** - Field-by-field collection
5. **Auto-follow-up sent** - Response automatically sent to agent

This provides immediate feedback while maintaining clean presentation.

## Example 5: Regular Markdown Responses

Non-structured responses continue to work as before:

### Agent Response

```markdown
Here's how to deploy your application:

1. First, ensure your cluster is ready
2. Apply the configuration: `kubectl apply -f config.yaml`
3. Verify the deployment: `kubectl get pods`

Your deployment should be ready in a few minutes.
```

### User Experience

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI Platform Engineer Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                         â”‚
â”‚  Here's how to deploy your application:                 â”‚
â”‚                                                         â”‚
â”‚  1. First, ensure your cluster is ready                 â”‚
â”‚  2. Apply the configuration: kubectl apply -f...        â”‚
â”‚  3. Verify the deployment: kubectl get pods             â”‚
â”‚                                                         â”‚
â”‚  Your deployment should be ready in a few minutes.      â”‚
â”‚                                                         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

## For Agent Developers

### Response Format

To trigger interactive input, return a JSON response with this structure:

```json
{
  "is_task_complete": boolean,      // false if more interaction needed
  "require_user_input": boolean,     // true to prompt for input
  "content": "string",               // Message to display (markdown supported)
  "metadata": {
    "user_input": boolean,           // true to enable input
    "input_fields": [                // Array of input field definitions
      {
        "field_name": "string",      // Internal name for the field
        "field_description": "string", // User-facing prompt
        "field_values": [            // Array of options (dropdown) or [] (text input)
          "option1",
          "option2"
        ]
      }
    ]
  }
}
```

### Field Types

**Dropdown (with options):**
```json
{
  "field_name": "action",
  "field_description": "Select an action",
  "field_values": ["option1", "option2", "option3"]
}
```

**Text Input (empty or null values):**
```json
{
  "field_name": "description",
  "field_description": "Enter description",
  "field_values": []  // or null
}
```

### Return Value Handling

- **Single field:** Returns the selected/entered value as a string
- **Multiple fields:** Returns a JSON object with all field values
- The CLI automatically sends this as the next message to the agent

## Benefits

### 1. Interactive Experience
Guided data collection instead of manual JSON typing.

### 2. Validation
Automatic validation for dropdown selections prevents invalid input.

### 3. Discoverability
Field descriptions and available options shown inline.

### 4. Professional Appearance
Beautiful Rich-based formatting provides a polished UX.

### 5. Seamless Flow
Automatic follow-up handling maintains conversation flow.

## Technical Details

### UI Components

Built with Rich library:
- `Panel` - Content display
- `Markdown` - Formatted text
- `Table` - Dropdown options
- `Prompt` - User input collection

### Error Handling

- Invalid selections trigger re-prompt
- Ctrl+C cancels input gracefully
- Malformed JSON falls back to plain text display

---

**These examples demonstrate rich, interactive CLI experiences!** ğŸ“š

